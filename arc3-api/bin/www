const app = require('../src/app.js');
const port = process.env.PORT || 3000;
const https = require('https');

const mongoose = require('mongoose');

const dotenv = require('dotenv');
dotenv.config();

(async () => {

  mongoose.connect(process.env.MONGODB_URI)
  const server = https.createServer(app);

  server.listen(port, () => {
    console.log('connected at port: ' + port);
  });

  process.on('SIGTERM', () => {
    server.close(() => {
      console.log('closing...')
    })
  })

})();

